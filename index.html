<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Stylized fluids in browser</title>
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
  body { margin: 0; }
  canvas { width: 100%; height: 100% }
</style>
</head>
<body>
  <!-- Unit test library from http://unitjs.com/guide/introduction.html -->
  <script src="js/unit.js"></script>
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/three.min.js"></script>
  <script src="js/TrackballControls.js"></script>

  <!-- load shaders and external functions -->
  <!-- jp tutorial: https://qiita.com/konweb/items/ec8fa8cd3bc33df14933 -->
  <script type="x-shader/x-vertex" id="vertexshader">
    attribute vec4 color;   // color
    varying vec3 vPosition;

    void main() {
      vPosition = position;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
    }
  </script>
  <script type="x-shader/x-fragment" id="fragmentshader">
    precision mediump float;
    varying vec3 vPosition;
    uniform float z_size;
    uniform float d_alpha;
    uniform sampler2D texture;

    void main() {
      vec4 vpos = vec4( vPosition.x+0.5,vPosition.y+0.5,vPosition.z+0.5, 1.0 );
      gl_FragColor = vpos;

      float iz = floor( vpos.z * z_size + 0.5) ;
      float tx = (iz + vpos.x) / z_size ;
      gl_FragColor = texture2D( texture, vec2(tx,vpos.y) );
      gl_FragColor.w = d_alpha * gl_FragColor.w ;
    }
  </script>
  <script src="js/render.js"></script>
  <script src="js/fluid.js"></script>

  <script src="js/main.js"></script>
</body>
</html>
